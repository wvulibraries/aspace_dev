<%= setup_context :title => "Home", :suppress_breadcrumb => true %>

<% if flash.any? %>
  <div class="d-flex px-3">
    <div class="mt-3 flex-grow-1">
      <%= render_aspace_partial :partial => "shared/flash_messages" %>
    </div>
  </div>
<% end %>

<div class="d-flex py-5">
  <div class="col-md-6 col-xl-4 lg-min-w-450px p-4"><!-- should lg-min-w-450px be xl-min-w-450px? -->
    <h2><%= t "welcome.heading" %></h2>
    <%= welcome_message %>
  </div>
  <% if !session[:user] %>
  <div class="col-md-6 col-xl-4 p-4 bg-light">
    <main id="login-form-wrapper" class="card p-3 p-sm-4">
      <h3 class="mt0"><%= I18n.t "login.login_please" %></h3>
      <%= render_aspace_partial :partial => "shared/login" %>
      <% if AppConfig[:allow_user_registration] %>
        <p class="mb-2"><%= t "navbar.register_prefix" %> <%= link_to t("navbar.register"), {controller: "users", action: "new"}, class: "boring-link" %></p>
      <% end %>
      <% if AppConfig[:allow_password_reset] %>
        <p class="mb-0"><%= t("login.lost_password") %> <%= link_to t("login.reset_password"), {controller: "users", action: "password_form"}, class: "boring-link" %></p>
      <% end %>
    </main>
  </div>
  <% end %>
</div>
